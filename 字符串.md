# 字符串

## [344. 反转字符串](https://leetcode-cn.com/problems/reverse-string/)

在反转链表中，使用了**双指针**的方法。

那么反转字符串依然是使用双指针的方法,因为字符串也是一种数组，所以元素在内存中是**连续分布,对于字符串的反转，其实要比链表简单一些。

对于字符串，我们定义两个指针（也可以说是索引下标），一个从字符串前面，一个从字符串后面，两个指针同时向中间移动，并交换元素。

以字符串`hello`为例，过程如下：

![344.反转字符串](https://tva1.sinaimg.cn/large/008eGmZEly1gp0fvi91pfg30de0akwnq.gif)

```js
/**
 * @param {character[]} s
 * @return {void} Do not return anything, modify s in-place instead.
 */
var reverseString = function(s) {

    let l=0,r=s.length-1; //l,s为下标  //1 <= s.length <= 105
    while(l<=r){//不能用l!=r, l=0, r=1 循环一次后 l=1,r=0
        let tmp='';
        tmp=s[r];
        s[r]=s[l];
        s[l]=tmp;
        l++;
        r--;
    }
};
```



## [541. 反转字符串 II](https://leetcode-cn.com/problems/reverse-string-ii/)

### 思路

在遍历字符串的过程中，只要让 i += (2 * k)，i 每次移动 2 * k ，然后判断是否需要有反转的区间。

因为要找的也就是每2 * k 区间的起点,**所以当需要固定规律一段一段去处理字符串的时候，要想想在在for循环的表达式上做做文章。**

```js
/**
 * @param {string} s
 * @param {number} k
 * @return {string}
 */
var reverseStr = function(s, k) {
    let left=0,right=s.length;
    let resArr=s.split('');
    // 1. 每隔 2k 个字符的前 k 个字符进行反转
    for(let i=0;i<s.length;i+=2*k){
    // 2. 剩余字符小于 2k 但大于或等于 k 个，则反转前 k 个字符
    //3. 剩余字符少于 k 个，则将剩余字符全部反转
        let l=i-1,r=i+k>s.length?s.length:i+k;
        while(++l<--r){
            [resArr[l],resArr[r]]=[resArr[r],resArr[l]]
        }
    }
    return resArr.join('');
    
};
```





```js
/**
 * @param {string} s
 * @return {string}
 */
var replaceSpace = function(s) {
    const arr=Array.from(s);
    let count=0;
    for(ar of arr){ar==' '&&count++}
    //从后往前填充
    let left=s.length-1,right=s.length+count*2-1;//*2不是*3是因为本身空格就有一位 %20；
    while(left>=0){
        if(arr[left]==' '){
            arr[right--]='0';
            arr[right--]='2';
            arr[right--]='%';
            left--;
        }else{
            arr[right--]=arr[left--];
        }
    }
    return arr.join('')
};
```



## [剑指 Offer 05. 替换空格](https://leetcode-cn.com/problems/ti-huan-kong-ge-lcof/)

### 思路

首先扩充数组到每个空格替换成"%20"之后的大小。

然后从后向前替换空格，也就是双指针法，过程如下：

i指向新长度的末尾，j指向旧长度的末尾。

![替换空格](https://tva1.sinaimg.cn/large/e6c9d24ely1go6qmevhgpg20du09m4qp.gif)

**从后往前填充**

```js
/**
 * @param {string} s
 * @return {string}
 */
var replaceSpace = function(s) {
    const arr=Array.from(s);
    let count=0;
    for(ar of arr){ar==' '&&count++}
    //从后往前填充
    let left=s.length-1,right=s.length+count*2-1;//*2不是*3是因为本身空格就有一位 %20；
    while(left>=0){
        if(arr[left]==' '){
            arr[right--]='0';
            arr[right--]='2';
            arr[right--]='%';
            left--;
        }else{
            arr[right--]=arr[left--];
        }
    }
    return arr.join('');
};
```

## [151. 颠倒字符串中的单词](https://leetcode-cn.com/problems/reverse-words-in-a-string/)

​	水题思路:*split分割 倒序输出字符串*

解题思路如下：

- 移除多余空格(首尾+重复)
- 将整个字符串反转
- 将每个单词反转

```js
/**
 * @param {string} s
 * @return {string}
 */
 var reverseWords = function(s) {
   // 字符串转数组
   const strArr = Array.from(s);
   // 移除多余空格
   removeExtraSpaces(strArr);
   // 翻转
   reverse(strArr, 0, strArr.length - 1);

   let start = 0;

   for(let i = 0; i <= strArr.length; i++) {
     if (strArr[i] === ' ' || i === strArr.length) {
       // 翻转单词
       reverse(strArr, start, i - 1);
       start = i + 1;
     }
   }

   return strArr.join('');
};

// 删除多余空格
function removeExtraSpaces(strArr) {
  let slowIndex = 0;
  let fastIndex = 0;

  while(fastIndex < strArr.length) {
    // 移除开始位置和重复的空格
    if (strArr[fastIndex] === ' ' && (fastIndex === 0 || strArr[fastIndex - 1] === ' ')) {
      fastIndex++;
    } else {
      strArr[slowIndex++] = strArr[fastIndex++];
    }
  }

  // 移除末尾空格
  strArr.length = strArr[slowIndex - 1] === ' ' ? slowIndex - 1 : slowIndex;
}

// 翻转从 start 到 end 的字符
function reverse(strArr, start, end) {
  let left = start;
  let right = end;

  while(left < right) {
    // 交换
    [strArr[left], strArr[right]] = [strArr[right], strArr[left]];
    left++;
    right--;
  }
}
```



## [剑指 Offer 58 - II. 左旋转字符串](https://leetcode-cn.com/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof/)

**不申请额外空间，只在本串上操作**。

**步骤**

1. 反转区间为前n的子串
2. 反转区间为n到末尾的子串
3. 反转整个字符串

<img src="https://code-thinking.cdn.bcebos.com/pics/%E5%89%91%E6%8C%87Offer58-II.%E5%B7%A6%E6%97%8B%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2.png" alt="剑指Offer58-II.左旋转字符串" style="zoom:50%;" />



```js
/**
 * @param {string} s
 * @param {number} n
 * @return {string}
 */
var reverseLeftWords = function(s, n) {
    const reverse=(s,l,r)=>{
        
        while(l<r){
            [s[l],s[r]]=[s[r],s[l]];
            l++;
            r--;
        }
    }
    let arr=Array.from(s);
    // reverse(arr,0,s.length-1);
    // reverse(arr,0,s.length-n-1)
    // reverse(arr,s.length-n,s.length-1)
    reverse(arr,0,n-1);
    reverse(arr,n,s.length-1);
    reverse(arr,0,s.length-1)
    return arr.join('');
};
```

